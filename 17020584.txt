Câu 1
DELIMITER $$
CREATE TRIGGER `baitap1` AFTER INSERT ON `orderdetails`
 FOR EACH ROW BEGIN 
IF NEW.quantityOrdered>(SELECT quantityInStock FROM products WHERE productCode=NEW.productCode) THEN
INSERT INTO note
SET 
note.OrderNumber=NEW.orderNumber,
note.ProductCode=NEW.productCode,
note.Note="Thieu hang hoa cung ung";
END IF;
END$$
DELIMITER ;

Câu 2
DELIMITER $$
CREATE TRIGGER `baitap2` BEFORE INSERT ON `orderdetails`
 FOR EACH ROW BEGIN 
IF NEW.quantityOrdered>(SELECT quantityInStock FROM products WHERE productCode=NEW.productCode) THEN
CALL  `'Khong du luong hang theo yeu cau'`;
END IF;
END$$
DELIMITER ;

Câu 3
DELIMITER $$
CREATE TRIGGER `baitap3` AFTER UPDATE ON `orders`
 FOR EACH ROW BEGIN 
IF NEW.status="Cancelled"  and NOT OLD.status="Cancelled" THEN
UPDATE products 
SET products.quantityInStock = products.quantityInStock + (SELECT quantityOrdered  FROM orderdetails WHERE orderdetails.orderNumber=NEW.orderNumber and orderdetails.productCode=products.productCode)
WHERE productCode IN (SELECT productCode FROM orderdetails WHERE orderdetails.orderNumber=NEW.orderNumber );
END IF;
END$$
DELIMITER ;